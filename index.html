<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Keep or Toss</title>

<style>
:root{
  --bg:#0b0c10;
  --card:#111318;
  --text:#e8e8ea;
  --muted:#a8abb4;
  --border:rgba(255,255,255,.12);
  --ok:#20c997;
  --warn:#ffcc00;
  --danger:#ff4d4f;
}
*{box-sizing:border-box;}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:var(--bg);
  color:var(--text);
}
.wrap{max-width:420px;margin:0 auto;padding:16px;}
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:16px;
  padding:16px;
}
h1{margin:0 0 6px;font-size:24px;}
.sub{color:var(--muted);font-size:13px;margin-bottom:12px}

input,button{
  width:100%;
  background:#1a1f2b;
  border:1px solid var(--border);
  border-radius:12px;
  padding:12px;
  color:var(--text);
  font-weight:600;
}
button{cursor:pointer}

.paoGrid{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:8px;
  margin-top:12px;
}
.paoBtn.active{
  border-color:var(--ok);
  box-shadow:0 0 0 2px rgba(32,201,151,.3) inset;
}

.preview{
  margin-top:12px;
  border-radius:12px;
  overflow:hidden;
  border:1px solid var(--border);
}
.preview img{
  width:100%;
  display:block;
}

.result{
  margin-top:12px;
  padding:12px;
  border-radius:12px;
  text-align:center;
}
.result.ok{color:var(--ok)}
.result.warn{color:var(--warn)}
.result.err{color:var(--danger)}
</style>
</head>

<body>
<div class="wrap">
  <h1>Keep or Toss</h1>
  <div class="sub">Photo preview → PAO → date</div>

  <div class="card">
    <!-- 사진 선택 -->
    <input id="photo" type="file" accept="image/*">

    <!-- 사진 미리보기 -->
    <div id="preview" class="preview" style="display:none">
      <img id="img">
    </div>

    <!-- 날짜 -->
    <input id="opened" type="date" style="margin-top:12px">

    <!-- PAO -->
    <div id="paoGrid" class="paoGrid"></div>

    <!-- 결과 -->
    <div id="result" class="result" style="display:none"></div>
  </div>
</div>

<script>
/* ===== 상태 ===== */
const PAO = [3,6,9,12,18,24,36];
let selectedPao = null;

/* ===== 유틸 ===== */
const $ = id => document.getElementById(id);
const today = () => new Date().toISOString().slice(0,10);

function addMonths(d,m){
  const x=new Date(d); x.setMonth(x.getMonth()+m); return x;
}
function daysLeft(t){
  return Math.floor((t-new Date())/86400000);
}

/* ===== 사진 미리보기 ===== */
$("photo").onchange = e=>{
  const file = e.target.files[0];
  if(!file) return;
  const url = URL.createObjectURL(file);
  $("img").src = url;
  $("preview").style.display="block";
};

/* ===== PAO 버튼 ===== */
PAO.forEach(m=>{
  const b=document.createElement("button");
  b.textContent=m+"M";
  b.className="paoBtn";
  b.onclick=()=>{
    selectedPao=m;
    [...$("paoGrid").children].forEach(x=>x.classList.remove("active"));
    b.classList.add("active");
    calc();
  };
  $("paoGrid").appendChild(b);
});

/* ===== 계산 ===== */
function calc(){
  if(!selectedPao) return;
  const opened = new Date($("opened").value);
  const toss = addMonths(opened, selectedPao);
  const d = daysLeft(toss);

  const r = $("result");
  r.style.display="block";
  r.className="result "+(d<0?"err":d<=30?"warn":"ok");
  r.textContent =
    d<0 ? "TOSS IT" :
    d<=30 ? "USE SOON" :
    "SAFE TO USE";
}

/* 초기값 */
$("opened").value = today();
$("opened").onchange = calc;
</script>
</body>
</html>
